<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ONE ARABESQUE IN THE SMALL WORLD OF OD WEBMAPS</title>
    <meta charset="utf-8" />
    <meta name="author" content="Nicolas Roelandt" />
    <meta name="date" content="2021-08-24" />
    <script src="FOSS4G2021_presentation_files/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





class: inverse center middle title-slide

# ONE ARABESQUE IN THE SMALL WORLD OF OD WEBMAPS

## Nicolas Roelandt

.bottom[
### &lt;span style='color:#ef7d00;'&gt;_FOSS4G 2021 - remote_&lt;/span&gt;

&lt;img src="media/logos.svg" width="100%" /&gt;
]

###### Press &lt;span style='color:#ef7d00;'&gt;P&lt;/span&gt; to access notes

---

# Introduction

--

.pull-left[
- Part of the Gflowiz project
]

.pull-right[
&lt;img src="media/logo_gflowiz.jpg" width="60%" /&gt;
]

--
- Focus on **web applications**

--
- Thematic *geovisualization* and cartographic purposes

--
- **Flows** and spatial networks

--
- Review of existing tools (2016 -)

--
- Survey within 200 users

--
- Development of Arabesque (2018 -)


???

The paper focuses on a specific part of geoweb, it relates to flows and spatial networks for thematic geovisualization and cartographic purposes.

Arabesque, after an online survey of people interested in geovisualizing this type of data and a review of existing web pages and applications.

Particularities of flow mapping : pay close attention to the preparation and processing of the OD data before representation, otherwise graphical (e.g. spaghetti effect) and visual complexities will arise.

arabesque positioning: combining OD data visualization and cartography (not also mapping). 

3 key points: dealing with numerical data, geographical data, display.


---
class: inverse center middle

# Why compare ?
---
layout: true
# Why compare ?
---

- Arabesque V1 available, V2 in dev

--
- Is it really innovative ?

--
- Can we help users to make an informed choice ?

???

Arabesque is now an usable application, useable by everyone.
It is not perfect, some features we think important are missing, there is some inconvenient bugs.
So we are working on a version 2.

But is Arabesque really innovative, does it brings something to the community that are not in similar tools ?

So we made this comparison and wrote this paper to help user make an informed choice


---
layout: false
class: inverse center middle
# Comparison criteria

---
layout: true
# Comparison criteria

---
Focus on applications similar to Arabesque :
  * Web applications
  * FOSS
  * OD data visualisation capabilities
  * comparison on the [same dataset](https://gflowiz.github.io/article_foss4g2021/articles/article_FOSS4G2021.html#the-mobsco-dataset)

--

4 apps:
- Arabesque
- Flowmap.blue
- Kepler.gl
- Magrit

???

We decided to focus on applications that are similar to Arabesque:
- Web applications that runs in a web browser (so no desktop application like QGIS and no programmation languages like Python or Javascript)
- Free and Open Source Software for 2 reasons: Arabesque is FOSS and for reproductibility concerns of the article, we choose to only compare it to software that are accessible
- The softwares has to be able to visualize Origin-Destination data, a capability often lacking in webmapping tools
- We used the same subset of the MOBSCO dataset in each application

---
layout: false
## Arabesque

.left-column[
* Developped in 2019, part of the [Gflowiz project](https://geoflowiz.hypotheses.org/)
* Exploration and geovisualisation of origin-destination flows]

.right-column[
![](media/image3.png)
]

???
Arabesque was developped in 2019 inside the Gflowiz project with the goal to provide a tool dedicated to Exploration and geovisualisation of origin-destination flows and spatial networks.
Few tools are able to map origin-destination flows and often lacks functionnalities like 

---

## [Flowmap.blue](https://flowmap.blue/)

.left-column[
* Created in 2019
* Explore and create flow maps
]

.right-column[
![](media/image5.png)
]

---

## [Kepler.gl](https://kepler.gl/)

.left-column[
* Launched in 2018
* Geovisualisation tool designed for complex datasets
]

.right-column[
![](media/image4.jpg)
]
---
## [Magrit](http://magrit.cnrs.fr/)

.left-column[
* 2017 by the RIATE team
* Thematic cartography software]

.right-column[
![](media/image6.jpg)
]
 
---
layout: false
class: inverse center middle
# Data model

---
layout: true
# Data model
---

* data format may varie

--
* data stockage may varie : wide/large matrix format

--
* nodes coordinates in WGS84 (lat/lon)

--
* no cleaning tools provided

???

Data format: 
- 2 files nodes / links is the most common (all but Kepler.gl).
-  kepler.gl works with a single file with Origin and destination coordinates in 4 columns

Coordinates:
Coordinates has to be in WGS84 for Arabesque, Kepler.gl and Flowmap.blue
Magrit accept projected data
So the data might need to be transformed before hand

Cleaning:
Your data needs to be prepared ahead using other tools.
Arabesque provide information on rejected data.

---
layout: false
class: inverse center middle
# Usage

---
layout: true
# Usage
---

* Representation

  * Arabesque
  * Kepler.gl
  * Flowmap.blue
  * Magrit
  
--

* Exploration

  * Arabesque
  * Kepler.gl
  * Flowmap.blue

--

* Data Analysis
  * Arabesque only

???

All applications can be used to represent OD data.
However Kepler.gl and Flowmap.blue offers limited design options (3D arcs).
kepler.gl and Flowmap.blue provide some exploration functionalities like zooming on a region, popups on hovering or brushing.
Magrit, on the other hand, is more focused on the production of static maps and does not allow navigation and exploration
It data analysis  capabilities are limited to a histogramm of the dataset without filtering.

Only Arabesque offers real data analysis capabilities with custom filtering options and new indicators computation.

---
layout: false
class: inverse center middle
# Public/Purpose

---
layout: true
# Public/Purpose
---

* Data exploration and visualisation
    * general public
    * data journalist
    * web publishing
    * **Kepler.gl** / **Flowmap.blue**
    
* Academia and teaching
    * thematic maps production
    * statistical analysis capabilities
    * **Arabesque** / **Magrit**

???

Which application to use for which purpose?

Each tool meet specific needs according to the profiles (technical skills, mapping knowledge) and objectives (communication, exploration, mapping) of the different users (geographer, cartographer, GIS specialist, data scientist, data journalist, urban planner, etc.).

We think that for data exploration and visualisation, by the general public or data journalist, kepler.gl or Flowmap.blue are best fitted. They do not require the user to have significant knowledge of cartography and are oriented towards web publishing, allowing quick publication and interactive reading.


On the other hand, the representation possibilities are limited to a colored 3D arc.

For the creation of static thematic maps or statistical exploration of data, we recommend using Magrit or Arabesque.
The representation possibilities are more important, although limited to two dimensions. The result will be more suitable for teaching or publishing scientific articles.


---
layout: false
class: inverse center middle
# Performance

---
layout: true
# Performance
---

## Technology dependant
--

* Kepler.gl and Flowmap.blue
    * Deck.gl
    * large datasets
    * fast
    * limited graphic options
--

* Arabesque and Magrit
    * D3
    * smaller datasets (&lt; 10 000 objects)
    * more graphic options

???

The performance is also very good of Kepler.gl and Flowmap.blue, allowing to visualize large datasets, quickly.

Arabesque and Magrit do not support large datasets under penalty of slowing down or blocking your computer.
It may therefore be necessary to aggregate the data beforehand.


---
layout: false
class: inverse center middle
# Interoperability and reproducibility
---
layout: true
# Interoperability and reproducibility
---
 
## data format

  * CSV and/or GeoJSON
  * 2 separates tables (except for Kepler.gl)
  * same files for Arabesque, Magrit &amp; Flowmap.blue
  
???
Most applications tested used CSV files as input, some accept geojson.
Generally they except 2 separates tables

Note that for Flowmap.blue you will have to save the CSV file in a google sheet document or copy-paste the data in a browser

---

## Export
* online hosting (Kepler.gl, Flowmap.blue)
* image export (Arabesque, Magrit)
* Data and project parameters (Arabesque, Kepler.gl, Magrit)

???
Kepler.gl and Flowmap.blue propose to the user to host online their production, which is a real asset to diffuse dynamic cartography online.

Arabesque and Magrit are more oriented towards editing cartography and only offer image output formats.
Arabesque, Kepler.gl and Magrit allow you to export the data and parameters of a project so that a user can share their analysis.

---

layout: false
class: inverse center middle
# Conclusion

---
layout: true
# Conclusion
---

- Business culture, user's skills and final use of the map influence the choice of the tool because it will influence the chosen approaches (exploration and/or analysis)
- Data does not influence the choice of the tool
- A whole range of needs and possibilities are covered, for the benefits of the community.

---
layout: false
class: center inverse

# Thanks!

Nicolas Roelandt - Univ. Gustave Eiffel

[nicolas.roelandt@univ-eiffel.fr](mailto:nicolas.roelandt@univ-eiffel.fr) [@RoelandtN42](https://twitter.com/RoelandtN42)

Access to Arabesque application : [arabesque.ifsttar.fr](http://arabesque.ifsttar.fr/)

Article pre-print version : [gflowiz.github.io/article_foss4g2021](https://gflowiz.github.io/article_foss4g2021/articles/article_FOSS4G2021.html)

.center[

&lt;img src="media/logos.svg" width="100%" /&gt;
]

.bottom-left[
##### Slides created via the R packages [xaringan](https://github.com/yihui/xaringan) and  [gadenbuie/xaringanthemer](https://github.com/gadenbuie/xaringanthemer)
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
